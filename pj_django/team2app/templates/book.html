<!DOCTYPE html>
<html lang="ko">
{% extends 'header.html' %}
{% block contents %}
{% load static %}
<head>
   <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
   <style>  
      .write{
         padding:1rem;
         margin:0px auto;
         margin-top:2rem;
         margin-bottom:4rem;
         border-left:8px solid #0dcaf0;
      }
      table{
         border:1px solid #e6e6e6;
      }
      .table-striped > tbody > tr:nth-child(2n+1) > th,
      .table-striped > tbody > tr:nth-child(2n+1) > td {
         background-color: #f2f7f7;
      }
      a:link, a:visited, a:hover, a:active {text-decoration: none;}
   </style>

<body>
   <div id="cont_cont">
      <div class="container" role="main">
			<div class="book"><h2><b>예약</b></h2></div>
         <form class="f" name="f" action="book_ok/" method="post">
            {% csrf_token %}
            <div class="table table-responsive">
               <table class="table table-striped table table-bordered">
            <tr>
                <td>병원명</td>
                <td id="hosname" name="hosname">{{hosname}}</td>
            </tr>
            <tr>
                <td>예약자 성함</td>
                <td>{{name.name}}</td>
            </tr>
            <tr>
                <td>연락처</td>
                <td>{{phoneNum.phoneNum}}</td>
            </tr>
            
            <tr>
               <td>예약시간</td>
               <td>
                <input type="date" name="bookdate" id="bookdate" min="{{tomorrow}}">
                <input type="time" name="booktime" id="booktime" min="09:00" max="18:00" step="1800" required>
              </td>
            </tr>
            <tr>
                <td>증상</td>
                <td><input type="text"  class="form-control" id="symptom" name="symptom" placeholder="증상을 입력해 주세요"></td>
            </tr>
            <tr>
               <td>기타내용</td>
               <td><textarea rows="10" cols="50" name="content" id="content" class="form-control" placeholder="기타 자세한 내용을 입력해 주세요"></textarea></td>
            </tr>
            </table>
            <div class="btn">
               <button type="button" class="btn btn-outline-info btn-lg" id="listButton" onclick="location.href='../search'">목록</button>	
               <button type="submit" class="btn btn-info btn-lg" id="saveButton">예약하기</button>	
            </div>
         </form>
		</div>
   </div>
   
   <script type="text/javascript">
      $("#saveButton").click(function() {
         var bdate=document.querySelector("#bookdate").value;
         var btime=document.querySelector("#booktime").value;
         var param = {bdate:bdate,btime:btime,symptom:$("#symptom").val(),content:$("#content").val(),hosname:$("#hosname").text()};
         console.log(bdate,btime)
         console.log(param)
         $.get("/team2app/book/book_ok", param, function(data) {
         });                 
     });
   </script>
   

{% endblock contents %}
</body>
</html>